import Ember from 'ember';
import ApplicationRouteMixin from 'ember-simple-auth/mixins/application-route-mixin';

export default Ember.Route.extend(
  ////////////////////////////////////////
  // Mixins
  ////////////////////////////////////////
  ApplicationRouteMixin,
  ////////////////////////////////////////

{
  ////////////////////////////////////////
  // Dependencies
  ////////////////////////////////////////
  session: Ember.inject.service('session'),
  ////////////////////////////////////////

  ////////////////////////////////////////
  // Lifecycle hooks
  ////////////////////////////////////////
  beforeModel(transition) {
    if (!this.get('session.isAuthenticated') && transition.targetName !== 'login') {
      return this.transitionTo('login');
    }
  }
  ////////////////////////////////////////

});
